(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(e){if(e.ep)return;e.ep=!0;const s=n(e);fetch(e.href,s)}})();const i=document.getElementById("message-box"),f=document.getElementById("send-button"),u=document.querySelector(".chat-output"),p="chatRaghu-prod-2025-01-10",h="https://your-production-api.com";function y(){const t=new Uint8Array(8);crypto.getRandomValues(t);const r=btoa(String.fromCharCode(...t)).replace(/[+/]/g,"").substring(0,8),n=new Date().toISOString().replace(/[-:]/g,"").replace("T","").replace(/\..+/,"");return`${r}-${n}`}let d=sessionStorage.getItem("threadId");d||(d=y(),sessionStorage.setItem("threadId",d));f.addEventListener("click",g);const c=document.querySelector(".gif-placeholder img");function m(t){t?c.src=c.dataset.loading:c.src=c.dataset.static}async function g(){try{m(!0);const t=i.value;if(!t||t.trim()===""){o("Message cannot be empty","system");return}if(t.trim().length<2){o("Message too short","system");return}if(t.length>100){o("Message too long (max 100 characters)","system");return}const r=t.replace(/[<>{}]/g,"").replace(/\s+/g," ").trim();if(r.length<2){o("Invalid input message","system");return}const n=sessionStorage.getItem("lastMessageTime"),a=Date.now();if(n&&a-parseInt(n)<1e3){o("Please wait before sending another message","system");return}sessionStorage.setItem("lastMessageTime",a.toString()),o(r,"user"),i.value="";const e=await fetch(`${h}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json","X-API-KEY":p},credentials:"include",body:JSON.stringify({message:r,thread_id:d})});if(e.status===401)throw new Error("Unauthorized");if(!e.ok)throw new Error("Network response was not ok");const s=await e.json();o(s.response,"bot")}catch(t){console.error("Error:",t),o(t.message==="Unauthorized"?"Unauthorized":"An error occurred. Please try again later.","bot")}finally{m(!1)}}function o(t,r){const n=document.createElement("div");n.classList.add(r+"-message"),n.innerHTML=`
        <div class="message-text">${t}</div>
    `,u.appendChild(n),u.scrollTop=u.scrollHeight}i.addEventListener("keyup",function(t){t.key==="Enter"&&g()});i.maxLength=100;const I=document.getElementById("message-box"),E=document.getElementById("char-count");i.addEventListener("input",function(){E.textContent=I.value.length+"/100"});
